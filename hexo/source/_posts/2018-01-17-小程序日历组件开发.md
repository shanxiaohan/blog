---
layout: post
title: '小程序日历组件开发'
date: 2018-01-17
tags: [小程序]
---

#### 微信小程序日历组件开发
最近想开发一个和健身、日程管理有关工具类的微信小程序自己用着~ 初步设计是主界面的主体为一个日历，功能上点击每天的日期进入"每日打卡"页面，可以自定义一些小的习惯，每天打卡记录完成情况并在首页的日历格子予以样式体现；第二个选项卡是日程计划功能，参考Pendo这个APP的UI，主要针对健身计划（或记录）做了细节上的设计，可以选择健身标签的模板，细化为训练的部位、组数、数量、时间等主要数据，也可以选择比较粗略的模板（比如运动内容和时长），或者空白页等（以后想开发能够上传图片发动态心情类的功能= =）；第三个选项卡设计为每日推送和健身有关的微信公众号的文章（如硬派健身、keep等），由于现在我们普遍关注的微信公众号太多太杂，目前好像也木有发现可以把关注的进行分组之类的功能... 自己有时候想集中浏览一下和健身有关的文章，就翻的很零散，于是诞生了这个小的需求~ （后续想可以自定义关注哪些公众号做每日推送~ ）  
这篇主要记录一下开发首页的日历组件遇到的问题和解决方案~   

##### 一、项目结构
受react组件化开发思想的影响，新版的小程序也支持自定义组件的扩展。在`component`支持之前可以选择`template`体现组件化的思想，但是`component`比`template`模板化开发的优势在于，`template`只能模块化`wxml`和`wxss`文件，不能将`js`代码整合到模板内，这样与其有关的js代码都要写在调用方的页面js文件中，模块化的不是很优雅= = 这里的日历可以作为一个和页面无关的独立的组件，因此选择自定义组件的形式。（[参考官方文档](https://mp.weixin.qq.com/debug/wxadoc/dev/framework/custom-component/)）

【工程目录结构】![项目结构](/images/blog/structure.png)
目录结构说明:
- `components`目录单独存放自定义组件的模块，比如这里的`calendar`组件（每个子目录下可以有自己的`.json`配置文件，和页面的开发类似）；  
- `pages`目录存放每个子页面，需要在`app.json`配置文件中添加路由页面才可以；
- `static`目录存放一些静态资源，这里主要是一些图标图片文件；
- `utils`目录下的`utils.js`文件主要是一些单独抽出来的公共方法，比如：复杂对象的深拷贝，这些可能很多地方都用得到的工具方法= =；

和日历组件有关的部分主要是`/components/calendar/calendar.*`和`pages/calendar/calendar.*`这两个地方~  


